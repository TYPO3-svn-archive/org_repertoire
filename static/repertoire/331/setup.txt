

  ////////////////////////////////////////
  //
  // INDEX

  // plugin.tx_browser_pi1
  //    views
  //      331: +Org-Repertoire: Repertoire



  ////////////////////////////////////////
  //
  // plugin.tx_browser_pi1

plugin.tx_browser_pi1 {
  
  template {
    extensions {
      org_repertoire {
        repertoire {
          name      = +Org-Repertoire: Repertoire
          file      = EXT:org_repertoire/res/html/repertoire/331/default.tmpl
          csvViews  = 331
        }
      }
    }
  }

  views {
    list {
      331 = +Org-Repertoire: Repertoire
      331 {
        name    = +Org-Repertoire: Repertoire
        showUid = repertoireUid
        select (
          tx_org_repertoire.title,
          tx_org_repertoire.producer,
          tx_org_repertoire.subtitle,
          tx_org_repertoire.teaser_short,
          tx_org_repertoire.bodytext,
          tx_org_repertoire.image,
          tx_org_repertoire.imageseo
        )
        csvLinkToSingleView = tx_org_repertoire.title
        filter {
          tx_org_cal {
            datetime < plugin.tx_browser_pi1.displayList.master_templates.selectbox
            datetime {
              area < plugin.tx_browser_pi1.displayList.master_templates.areas.sample_period
              first_item {
                stdWrap {
                  data = LLL:EXT:org_repertoire/locallang_db.xml:filter_phrase.schedule
                }
              }
              wrap = <span class="selectbox">|</span>
              wrap {
                item {
                  display_without_any_hit = 0
                  display_hits            = 0
                  stdWrap {
                    htmlSpecialChars = 0
                    crop >
                    strftime = %a, %m.%d.%y %H:%M
                  }
                }
              }
              order.field = uid
            }
          }
        }
        tx_org_cal {
          datetime = TEXT
          datetime {
            value = ###TX_ORG_CAL.DATETIME### h
            lang {
              de = ###TX_ORG_CAL.DATETIME### Uhr
            }
            strftime = %A, %d. %B, %H:%M Uhr
          }
        }
        tx_org_repertoire {
          teaser_short = COA
          teaser_short {
            required    = 1
            wrap        = <div class="repertoire_teasershort">|</div>
            20 = TEXT
            20 {
              required    = 1
              if.isTrue   = ###TX_ORG_REPERTOIRE.TEASER_SHORT###
              value       = ###TX_ORG_REPERTOIRE.TEASER_SHORT###
              stripHtml   = 1
              crop        = 200 | &nbsp;... | 1
            }
            21 = TEXT
            21 {
              required    = 1
              if.isFalse  = ###TX_ORG_REPERTOIRE.TEASER_SHORT###
              value       = ###TX_ORG_REPERTOIRE.BODYTEXT###
              stripHtml   = 1
              crop        = 200 | &nbsp;... | 1
            }
            30 = TEXT
            30 {
              value   = more &raquo;
              lang.de = mehr &raquo;
              typolink {
                parameter         = {$plugin.org.pages.repertoire} - linktosingle
                additionalParams  = &tx_browser_pi1[repertoireUid]=###TX_ORG_REPERTOIRE.UID###&###CHASH###
              }
              noTrimWrap = | ||
            }
          }
          subtitle = TEXT
          subtitle {
            required  = 1
            value     = ###TX_ORG_REPERTOIRE.SUBTITLE###
            wrap      = <h3 class="repertoire_subtitle">|</h3>
          }
          title = COA
          title {
            wrap = <h2 class="repertoire_title">|</h2>
            10 = TEXT
            10 {
              required  = 1
              value     = ###TX_ORG_REPERTOIRE.TITLE###
              typolink {
                parameter         = {$plugin.org.pages.repertoire} - linktosingle
                additionalParams  = &tx_browser_pi1[repertoireUid]=###TX_ORG_REPERTOIRE.UID###&###CHASH###
              }
            }
            20 = TEXT
            20 {
              if.isTrue   = ###TX_ORG_REPERTOIRE.PRODUCER###
              value       = by ###TX_ORG_REPERTOIRE.PRODUCER###
              lang.de     = von ###TX_ORG_REPERTOIRE.PRODUCER###
              noTrimWrap  = | <span class="repertoire_producer">|</span>|
            }
          }
        }
      }
    }
    single {
      331 = +Org-Repertoire: Repertoire
      331 {
        displaySingle < plugin.tx_browser_pi1.displaySingle
        displaySingle {
          image.file >
        }
        marker < plugin.tx_browser_pi1.marker
        marker {
          my_listview_page = TEXT
          my_listview_page {
            value = All Repertoire &raquo;
            lang.de = Alle St&uuml;cke &raquo;
            typolink {
              parameter = {$plugin.org.pages.repertoire}
              title {
                value = All Repertoire
                lang.de = Repertoire und alle St&uuml;cke
              }
            }
          }
          my_singleview_title = TEXT
          my_singleview_title {
            value   = Repertoire
            lang.de = Repertoire
            wrap    = <div class="header01">|</div>
          }
          my_datesheet_div_begin = TEXT
          my_datesheet_div_begin {
            if.isTrue = ###TX_ORG_CAL.DATETIME###
            value     = <div class="my_datesheet_box">
          }
          my_datesheet_div_end = TEXT
          my_datesheet_div_end {
            if.isTrue = ###TX_ORG_CAL.DATETIME###
            value     = </div>
          }
        }
        advanced < plugin.tx_browser_pi1.advanced
        advanced.sql.devider.childrenRecords >
        select (
          tx_org_repertoire.title,
          tx_org_repertoire.subtitle,
          tx_org_repertoire.tx_org_cal,
          tx_org_repertoire.deleted,
          tx_org_repertoire.producer,

          tx_org_repertoire.actor,
          tx_org_repertoire.puppeteer,
          tx_org_repertoire.dancer,
          tx_org_repertoire.vocals,
          tx_org_repertoire.musician,
          tx_org_repertoire.video,
          tx_org_repertoire.narrator,
          tx_org_repertoire.director,
          tx_org_repertoire.advisor,
          tx_org_repertoire.assistant,
          tx_org_repertoire.stage_design,
          tx_org_repertoire.tailoring,
          tx_org_repertoire.requisite,
          tx_org_repertoire.garment,
          tx_org_repertoire.makeup,
          tx_org_repertoire.stage_manager,
          tx_org_repertoire.technical_manager,
          tx_org_repertoire.technique,
          tx_org_repertoire.light,
          tx_org_repertoire.sound,
          tx_org_repertoire.otherslabel,
          tx_org_repertoire.others,

          tx_org_repertoire.length,
          tx_org_repertoire.bodytext,
          tx_org_repertoire.staff,
          tx_org_repertoire.image,
          tx_org_repertoire.imagecaption,
          tx_org_repertoire.imageseo,
          tx_org_repertoire.embeddedcode,
          tx_org_repertoire.print,
          tx_org_repertoire.printcaption,
          tx_org_repertoire.printseo,
          tx_org_repertoire.documents,
          tx_org_repertoire.keywords,
          tx_org_repertoire.description,
          tx_org_cal.uid,
          tx_org_cal.datetime
        )
        orderBy {
          tx_org_cal (
            SELECT    tx_org_cal.uid      AS 'uid', 
                      tx_org_cal.datetime AS 'datetime'
            FROM      tx_org_cal,
                      tx_org_repertoire_mm_tx_org_cal
            WHERE     tx_org_repertoire_mm_tx_org_cal.uid_local    = ###UID_LOCAL###
              AND     tx_org_repertoire_mm_tx_org_cal.uid_foreign  = tx_org_cal.uid
            ORDER BY  tx_org_cal.datetime DESC
)
        }
        tx_org_cal {
            // Date isn't expired, date is expired
          datetime = COA
          datetime {
            10 = COA
            10 {
                // 10: date isn't expired, 20: date is expired 
              10 = COA
              10 {
                required  = 1
                wrap      = <div class="my_datesheet">|</div>
                if {
                  value.data = date : U
                  isGreaterThan = ###TX_ORG_CAL.DATETIME###
                }
                  // day (01 ... 31)
                10 = TEXT
                10 {
                  wrap      = <div class="day">|</div>
                  value     = ###TX_ORG_CAL.DATETIME###
                    // %d (01 ... 31)
                  strftime = %d
                  typolink {
                    parameter = {$plugin.org.pages.calendar}
                    parameter {
                      insertData = 1
                    }
                    additionalParams = &tx_browser_pi1[calendarUid]=###TX_ORG_CAL.UID###&###CHASH###
                  }
                }
                  // month (Jan ... Dec) 
                20 = TEXT
                20 {
                  wrap      = <div class="month">|</div>
                  value     = ###TX_ORG_CAL.DATETIME###
                    // %b (Jan ... Dec)
                  strftime = %b
                  typolink {
                    parameter = {$plugin.org.pages.calendar}
                    parameter {
                      insertData = 1
                    }
                    additionalParams = &tx_browser_pi1[calendarUid]=###TX_ORG_CAL.UID###&###CHASH###
                  }
                }
                  // year (i.e: 2011)
                30 = TEXT
                30 {
                  wrap      = <div class="year">|</div>
                  value     = ###TX_ORG_CAL.DATETIME###
                    // %Y (11)
                  strftime = %Y
                  typolink {
                    parameter = {$plugin.org.pages.calendar}
                    parameter {
                      insertData = 1
                    }
                    additionalParams = &tx_browser_pi1[calendarUid]=###TX_ORG_CAL.UID###&###CHASH###
                  }
                }
              }
              20 < .10
              20 {
                if {
                  isGreaterThan >
                  isLessThan    = ###TX_ORG_CAL.DATETIME###
                }
                wrap      = <div class="datesheet datesheet_expired">|</div>
              }
            }
          }
        }
        tx_org_repertoire {
          actor = COA
          actor {
            wrap     = <table class="repertoire">|<table>
            if {
              isTrue = ###TX_ORG_REPERTOIRE.ACTOR###
            }
            10 = TEXT
            10 {
              data = LLL:EXT:org_repertoire/locallang_db.xml:tx_org_repertoire.actor
              wrap = <tr><td>|</td>
            }
            11 = COA
            11 {
              wrap = <td>|</td></tr>
              10 = TEXT
              10 {
                browser {
                  handleRelation  = 1
                  orderBy         = fe_users.last_name
                  devider = TEXT
                  devider {
                    value       = ,
                    noTrimWrap  = || |
                  }
                }
                value = ###FE_USERS.FIRST_NAME### ###FE_USERS.LAST_NAME###
                typolink {
                  parameter = {$plugin.org.pages.staff}
                  parameter {
                    insertData = 1
                  }
                  additionalParams = &tx_browser_pi1[staffUid]=###FE_USERS.UID###&###CHASH###
                }
              }
            }
          }
            // bodytext, staff
          bodytext = COA
          bodytext {
              // bodytext
            10 = TEXT
            10 {
              required  = 1
              value     = ###TX_ORG_REPERTOIRE.BODYTEXT###
              wrap      = <div class="repertoire_bodytext">|</div>
              stdWrap {
                parseFunc < lib.parseFunc_RTE
              }
            }
              // staff
            20 = TEXT
            20 {
              required  = 1
              value     = ###TX_ORG_REPERTOIRE.STAFF###
              wrap      = <div class="repertoire_staff">|</div>
              stdWrap {
                parseFunc < lib.parseFunc_RTE
              }
            }
          }
          image  < tt_content.image.20
          image {
            imgList.field >
            imgList = ###TX_ORG_REPERTOIRE.IMAGE###
            imgPath = uploads/tx_org/
            1 {
              file {
                width.field >
                width   = 160c;
                height  = 110c;
              }
              altText.field   >
              altText         = ###TX_ORG_REPERTOIRE.IMAGESEO###
              titleText.field >
              titleText       = ###TX_ORG_REPERTOIRE.IMAGESEO###
              imageLinkWrap {
                enable.field >
                enable = 1
                width   = 1000;
                height  = 800m;
                //JSwindow = 0
              }
            }
            layout {
              key.field >
                // above-left
              key = 2
            }
            cols.field >
            cols = 3
            caption.1 {
              field >
              value = ###TX_ORG_REPERTOIRE.IMAGECAPTION###
            }
            stdWrap {
              prefixComment >
              wrap          = <div class="image image_default">|</div>
            }
          }
            // subtitle, title, producer
          title = COA
          title {
              // subtitle
            10 = TEXT
            10 {
              required  = 1
              value     = ###TX_ORG_REPERTOIRE.SUBTITLE###
              wrap      = <h2 class="repertoire_subtitle">|</h2>
            }
              // title
            20 = TEXT
            20 {
              value = ###TX_ORG_REPERTOIRE.TITLE###
              wrap  = <h1 class="repertoire_title">|</h1>
            }
              // producer
            30 = TEXT
            30 {
              if.isTrue = ###TX_ORG_REPERTOIRE.PRODUCER###
              value     = by ###TX_ORG_REPERTOIRE.PRODUCER###
              lang.de   = von ###TX_ORG_REPERTOIRE.PRODUCER###
              wrap      = <h2 class="repertoire_producer">|</h2>
            }
          }
        }
      }
    }
  }
  
  _LOCAL_LANG {
    default {
      list_mode_331_titleTag      = TYPO3 Organiser: Repertoire
      list_mode_331_keywords      = TYPO3, Organiser, Repertoire
      list_mode_331_summary       = TYPO3 Organiser: Repertoire
      single_mode_331_titleTag    = TYPO3 Organiser: ###TX_ORG_REPERTOIRE.TITLE###
      single_mode_331_keywords    = ###TX_ORG_REPERTOIRE.KEYWORDS###
      single_mode_331_summary     = ###TX_ORG_REPERTOIRE.DESCRIPTION###
    }
    de {
      list_mode_331_titleTag      = TYPO3 Organiser: Repertoire und St&uuml;cke
      list_mode_331_keywords      = TYPO3, Organiser, Repertoire, St&uuml;cke
      list_mode_331_summary       = TYPO3 Organiser: Repertoire und St&uuml;cke
      single_mode_331_titleTag    = TYPO3 Organiser: ###TX_ORG_REPERTOIRE.TITLE###
      single_mode_331_keywords    = ###TX_ORG_REPERTOIRE.KEYWORDS###
      single_mode_331_summary     = ###TX_ORG_REPERTOIRE.DESCRIPTION###
    }
  }
}
  // plugin.tx_browser_pi1


  ////////////////////////////////////////
  //
  // Header Comment

page.config.headerComment (
        TYPO3-Programmierung: die-netzmacher.de
)
  // Header Comment
